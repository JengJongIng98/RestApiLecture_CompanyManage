@{
    ViewData["Title"] = "파일트리 관리";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<div class="container mt-4">
    <h2 class="mb-3">파일트리 관리</h2>

    <button id="btnLoadFolders" class="btn btn-success me-2">폴더 불러오기</button>
    <button id="btnCreateFolder" class="btn btn-primary">폴더 생성</button>

    <hr />

    <div class="row">
        <div class="col-md-5" id="folderTreeContainer" style="max-height: 600px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
            <h5>폴더 트리</h5>
            <div id="folderTree"></div>
        </div>

        <div class="col-md-7">
            <h5>폴더 정보</h5>
            <table class="table table-bordered">
                <tbody>
                    <tr><th>Folder ID</th><td id="infoFolderId"></td></tr>
                    <tr><th>Folder Name</th><td id="infoFolderName"></td></tr>
                    <tr><th>Upper Folder ID</th><td id="infoUpperFolderId"></td></tr>
                    <tr><th>File Path</th><td id="infoFilePath"></td></tr>
                    <tr><th>Folder Depth</th><td id="infoFolderDepth"></td></tr>
                    <tr><th>Created Date</th><td id="infoCreateDate"></td></tr>
                    <tr><th>Created By</th><td id="infoCreateUserId"></td></tr>
                    <tr><th>Folder Count</th><td id="infoFolderCount"></td></tr>
                    <tr><th>File Count</th><td id="infoFileCount"></td></tr>
                </tbody>
            </table>
            
            <button id="btnEditFolder" class="btn btn-outline-warning mt-3" disabled>✏️ 선택한 폴더 수정</button>
            <button id="btnDeleteFolder" class="btn btn-outline-danger mt-3" disabled>🗑️ 선택한 폴더 삭제</button>

        </div>
    </div>
</div>

<!-- 폴더 수정 모달 -->
<div class="modal fade" id="editFolderModal" tabindex="-1" aria-labelledby="editFolderModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="editFolderForm">
                <div class="modal-header">
                    <h5 class="modal-title">✏️ 폴더 수정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-2">
                        <label class="form-label">폴더 이름</label>
                        <input type="text" class="form-control" id="editFolderName" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-warning">수정</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 폴더 생성 모달 -->
<div class="modal fade" id="folderModal" tabindex="-1" aria-labelledby="folderModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="folderForm" class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="folderModalLabel">폴더 생성</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="folderName" class="form-label">폴더 이름</label>
                    <input type="text" id="folderName" class="form-control" required />
                </div>
                <div class="mb-3">
                    <label for="upperFolderId" class="form-label">상위 폴더 선택</label>
                    <select id="upperFolderId" class="form-select">
                        <option value="">(없음)</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="folderDepth" class="form-label">폴더 깊이</label>
                    <input type="number" id="folderDepth" class="form-control" readonly />
                </div>
                <div class="mb-3">
                    <label for="filePath" class="form-label">파일 경로</label>
                    <input type="text" id="filePath" class="form-control" readonly />
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">생성</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
            </div>
        </form>
    </div>
</div>

<script src="~/js/FileTree.js"></script>
